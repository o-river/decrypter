<!DOCTYPE html>
<html lang="ja" dir="ltr">
	<head>
		<meta charset="utf-8">
		<title>暗号を解読せよ！</title>
		<link rel="stylesheet" type="text/css" href="style.css">
		<script type="text/javascript">

var timer1; //タイマーを格納する変数（タイマーID）の宣言


//カウントダウン関数を1000ミリ秒毎に呼び出す関数
function cntStart(){
  document.timer.elements[2].disabled=true;
  timer1=setInterval("countDown()",1000);
}

//タイマー停止関数
function cntStop(){
  document.timer.elements[2].disabled=false;
  clearInterval(timer1);
}

//カウントダウン関数
function countDown(){
  var min=document.timer.elements[0].value;
  var sec=document.timer.elements[1].value;

  if( (min=="") && (sec=="") ){
    alert("時刻を設定してください！");
    reSet();
  }
  else{
    if (min=="") min=0;
    min=parseInt(min);

    if (sec=="") sec=0;
    sec=parseInt(sec);

    tmWrite(min*60+sec-1);
  }
}

//残り時間を書き出す関数
function tmWrite(int){
  int=parseInt(int);

  if (int<=0){
    reSet();
    alert("時間です！");
  }
  else{
    //残り分数はintを60で割って切り捨てる
    document.timer.elements[0].value=Math.floor(int/60);
    //残り秒数はintを60で割った余り
    document.timer.elements[1].value = zeroPadding(int % 60, 2);
  }
}

//フォームを初期状態に戻す（リセット）関数
function reSet(){
  document.timer.elements[0].value="0";
  document.timer.elements[1].value="00";
  document.timer.elements[2].disabled=false;
  clearInterval(timer1);
}

// NUM=値 LEN=桁数
function zeroPadding(NUM, LEN){
	return ( Array(LEN).join('0') + NUM ).slice( -LEN );
}


		</script>
	</head>
	<body>
		<header>
			<h1>交信して暗号を解読せよ！</h1>
		</header>
		<article class="timer-container">
			<h2>残り時間</h2>
				<form name="timer">
					<span class="time-container">
						<input type="number" class="time" value="0">:
						<input type="number" class="time" value="00">
					</span><br>
					<input type="button" class="controler" value="スタート" onclick="cntStart()">
					<input type="button" class="controler" value="ストップ" onclick="cntStop()">
				</form>
		</article>

		<article class="crypt-container">
			<h2>暗号は…</h2>
			<div class="crypt"></div>
		</article>

		<article class="decrypt-container">
			<h2>解読結果</h2>
			<form name="decrypt">
				<input type="text" class="decrypted-code" value="" placeholder="解読結果を入力"><br>
				<input type="button" class="controler" value="決定" onclick="checker()">
			</form>
		</article>
	</body>
</html>
